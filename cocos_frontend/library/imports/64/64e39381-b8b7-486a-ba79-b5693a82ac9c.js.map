{"version":3,"sources":["assets/Script/UIManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":[" \nimport UIPanel from \"./ui/UIPanel\"\n\nimport {ESceneType} from \"./CommonEnum\";\nimport ResManager from \"./ResManager\";\n//import LoginPanel from \"./LoginPanel\";\n\nexport default class UIManager {\n\n\n    public static readonly Instance: UIManager = new UIManager();\n\n    public static OpenPanel(nPanelId: number, strParam?: string) {\n        UIManager.Instance.OpenPanel(nPanelId, strParam);\n    }\n    \n    public static ShowTip(strTip: string)\n    {\n        cc.log('UIManager ShowTip='+strTip);\n        UIManager.Instance.showtip(strTip);\n    }\n\n    private constructor(){\n    }\n    mapUIPanel: {[key: number]: UIPanel} = {};\n    mapScendName: {[key: number]: string} = {};\n    appRootNode: cc.Node;\n    tipNode: cc.Node;\n\n    onLoadEnd(err, res){\n        // for(let key in res.json){\n        //     let nKey = parseInt(key);\n        //     cc.log(key)\n        //     this.mapScendName[nKey] = res.json[key];\n        // }\n        // cc.log('loadresendforfend')\n        // for(let key in this.mapScendName){\n        //     cc.log('www'+key+ this.mapScendName[key])\n        // }\n    }\n\n    Init(appRootNode: cc.Node){\n        this.appRootNode = appRootNode;\n\n        this.createTipNode();\n    }\n\n    loadPanel()\n    {\n\n    }\n    GetPanel(nPanelId: number)\n    {\n        return this.mapUIPanel[nPanelId];\n    }\n\n    OpenPanel(nPanelId: number, strParam?: string)\n    {\n        let uiPanelTab = ResManager.Instance.mapUIPanelTab[nPanelId];\n\n        if(uiPanelTab.nRemove === 1)\n        {\n            this.appRootNode.removeAllChildren(false);\n        }\n        let panel = this.mapUIPanel[nPanelId]\n        if(panel != null)\n        {\n            if(panel.node.parent === null)\n            {\n                this.appRootNode.addChild(panel.node);\n            }\n            panel.OnOpen( strParam);\n            return;\n        }\n\n        function  onLoadPrefabEnd(err, prefab)\n        {\n            let prefabNode: cc.Node = cc.instantiate(prefab);\n            prefabNode.addComponent(cc.BlockInputEvents);\n            let panel = prefabNode.addComponent(uiPanelTab.strName);\n            this.appRootNode.addChild(panel.node);\n            panel.OnOpen( strParam);\n            this.mapUIPanel[nPanelId] = panel;\n\n            //cc.Prefab\n            //cc.loader.releaseAsset(prefab)\n            cc.assetManager.releaseAsset(prefab)\n        }\n        //cc.loader.loadRes( uiPanelTab.strPrefabName, onLoadPrefabEnd.bind(this));\n        //static loadRes(url: string, completeCallback: (error: Error, resource: any) => void): void;\n        cc.resources.load( uiPanelTab.strPrefabName, onLoadPrefabEnd.bind(this));\n\n    }\n    closePanel(nPanelId: number)\n    {\n        \n        let panel = this.mapUIPanel[nPanelId]\n        if(panel === null)\n        {\n            return;\n        }\n        panel.node.removeFromParent(false);\n        panel.OnClose();\n    }\n\n    loadScene(nType:ESceneType)\n    {\n        let strName = this.mapScendName[nType]\n        if(strName === null)\n        {\n            return;\n        }\n        cc.director.loadScene(strName,this.onLoadSceneEnd.bind(this));\n    }\n    onLoadSceneEnd(){\n\n\n        \n\n    }\n\n    createTipNode()\n    {\n        if(this.tipNode != null)\n        {\n            return;\n        }\n        function  onLoadPrefabEnd(err, prefab)\n        {\n            this.tipNode = cc.instantiate(prefab);\n            //this.tipNode.retain();\n\n            //this.appRootNode.addChild(this.tipNode);\n            //cc.Prefab\n            //cc.loader.releaseAsset(prefab)\n            cc.assetManager.releaseAsset(prefab)\n        }\n        //cc.loader.loadRes( \"prefab/TipNode\", onLoadPrefabEnd.bind(this));\n        cc.resources.load( \"prefab/tippanel\", onLoadPrefabEnd.bind(this));\n    }           \n\n    showtip(strTip: string)\n    {\n        cc.log('showtip='+strTip);\n        //const newTipNode: cc.Node = (cc as any).duplicate(this.tipNode);\n\n        let newTipNode = cc.instantiate(this.tipNode);\n\n        this.appRootNode.addChild(newTipNode);\n        newTipNode.y = Math.random() * (500 - (-500)) + (-500);\n        newTipNode.zIndex = 1000;\n        let tippanel = newTipNode.addComponent(\"TipPanel\");\n        tippanel.showTip(strTip);\n\n        //let tipComp = this.tipNode.getComponent('TipNode');\n        //tipComp.showTip(strTip);\n\n    }\n\n\n\n  \n}\n"]}