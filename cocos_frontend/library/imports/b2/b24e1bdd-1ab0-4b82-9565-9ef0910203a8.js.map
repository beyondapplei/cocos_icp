{"version":3,"sources":["assets/Script/ui/LoginPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UIPanel from \"./UIPanel\"\nimport UIManager from \"../UIManager\";\nimport { EUIPanelType } from \"../CommonEnum\";\nimport {TableView,CellData} from \"./TableView\";\nimport ResManager from \"../ResManager\";\n\n//coin list panel = LoginPanel.ts\n\n//import { _decorator, Component, Label, Asset, assert, loader, sys, assetManager } from 'cc';\n\n//mport { _decorator, Component } from 'cc';\n//const { ccclass, property } = _decorator;\n\n\nclass MyCellData extends CellData{\n    labName:cc.Label;\n    btnIcon:cc.Button;\n    labContent:cc.RichText;\n    nOldBgHeight:number;\n    labPriceLow:cc.Label;\n    labPriceHi:cc.Label;\n    labPriceScale:cc.Label;\n\n    labCap:cc.Label;\n  \n    \n    init(node){\n        //this.nOrderState = 0;\n        //super.init();\n        this.node = node;\n        this.labName = this.node.getChildByName('labelname').getComponent(cc.Label);\n        this.labPriceLow = this.node.getChildByName('labelpricelow').getComponent(cc.Label);\n        this.labPriceHi = this.node.getChildByName('labelpricecur').getComponent(cc.Label);\n        this.labPriceScale = this.node.getChildByName('labelpricescale').getComponent(cc.Label);\n        this.labCap = this.node.getChildByName('labelcap').getComponent(cc.Label);\n\n        \n        this.btnIcon = this.node.getChildByName('btnIcon').getComponent(cc.Button);\n\n        this.nOldBgHeight = this.node.height;\n\n    }\n    refreshUI(info:CoinData){\n        \n        \n        let mapCoinTab = ResManager.Instance.mapCoinTab\n        let tabInfo = mapCoinTab[info.nId]\n        this.labName.string = tabInfo.strSymbol;\n        this.labPriceLow.string = tabInfo.nPriceLow.toString();//nPriceLow\n\n        \n        let nPriCur = info.nPriceHi.toFixed(3);\n        this.labPriceHi.string = nPriCur //info.nPriceHi.toString();//nPriceLow\n\n        let nScale:number = info.nPriceHi/tabInfo.nPriceLow\n        let strScale = nScale.toFixed(3);\n        this.labPriceScale.string = strScale; //nScale.toString();\n\n        this.labCap.string = info.nMC.toFixed(3); //info.nMC.toString();\n        \n    }\n    \n\n}\n//-===========================================\nclass CoinData{\n\n    nPriceHi:number;\n    nId:number;\n    nMC:number;\n    nScale:number;\n\n}\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class LoginPanel extends UIPanel {\n\n    tableview: TableView;\n    vCoinData:CoinData[] = [];\n    heightCell:MyCellData;\n    editBox:cc.EditBox;\n    nIndexReq:number;\n    nOrderState:number;\n\n\n    onLoad(){\n        this.nOrderState = 0;\n\n        this.nIndexReq = 0\n        let btnBeginNode = this.node.getChildByName('btnback');\n        btnBeginNode.on(cc.Node.EventType.TOUCH_END, this.clickBegin.bind(this,109825),this);\n    \n        let btnOrder = this.node.getChildByName('btnorder');\n        btnOrder.on(cc.Node.EventType.TOUCH_END, this.clickOrder.bind(this,1025),this);\n    \n\n        this.tableview = this.node.getChildByName('tableview').getComponent(TableView);\n        this.tableview.setRefreshCellCallBack(this, this.refreshCell, this.getCellHeight);\n\n        this.tableview.nodeElement.active = false;\n    \n    }\n    start () {\n    }\n    RefreshUI(){\n        this.tableview.reloadData(this.vCoinData.length);\n    }\n   \n\n    UpdateCurPrice(strSymbol:string,nPriceCur:number){\n        let mapCoinTab = ResManager.Instance.mapCoinTab\n\n        for(let k in this.vCoinData)\n        {\n            let cellData = this.vCoinData[k]\n            if (mapCoinTab[cellData.nId].strSymbol == strSymbol ){\n                this.vCoinData[k].nPriceHi = nPriceCur\n                this.vCoinData[k].nMC = nPriceCur * mapCoinTab[cellData.nId].nCount * 7.2\n                this.vCoinData[k].nScale = nPriceCur/mapCoinTab[cellData.nId].nPriceLow\n                break;\n            }\n            \n        }\n\n    }\n\n  \n    OnResult(strResponseText:string){\n        cc.log(\"OnResult\");\n        cc.log(strResponseText);\n        let jsObj = JSON.parse(strResponseText)\n        let nPriceCur = jsObj[\"result\"][\"rate\"]\n        let strSymbol = jsObj[\"result\"][\"asset_id_base\"]\n\n        this.UpdateCurPrice(strSymbol,nPriceCur)\n\n    }\n\n    sendXHR (strCoin:string) {\n        let xhr = new XMLHttpRequest();\n        let selfObj = this;\n\n        let OnResultLocal = function(){\n            if (xhr.readyState === 4 && xhr.status >= 200 && xhr.status < 400) {\n                // let aastring = handler(xhr.responseText);\n                var response = xhr.responseText;\n                \n                selfObj.OnResult(xhr.responseText)\n                \n    \n            } else if (xhr.status === 404) {\n                    cc.log('404 page not found!');\n            } else if (xhr.readyState === 3) {\n                cc.log('Request dealing!');\n            } else if (xhr.readyState === 2) {\n                cc.log('Request received!');\n            } else if (xhr.readyState === 1) {\n                cc.log('Server connection established! Request hasn\\'t been received');\n            } else if (xhr.readyState === 0) {\n                cc.log('Request hasn\\'t been initiated!');\n                \n            }\n        }\n\n        xhr.onreadystatechange = OnResultLocal;\n        let strIp = \"https://rest.coinapi.io/jsonrpc/\";\n        let mapData: {[key: string]: string} = {};\n        mapData[\"method\"] = \"v1/exchangerate/\"+strCoin+ \"/usdt\"\n\n        // let filterOne: {[key: string]: string} = {};\n        // filterOne[\"filter_asset_id\"] = strCoin\n        // let vSymbol = []\n        // vSymbol.push(filterOne)\n\n       // mapData[\"params\"] = vSymbol\n        let mapBody = JSON.stringify(mapData)\n        \n        xhr.open('POST', strIp,true);\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.setRequestHeader(\"Accept\",\"text/plain\");\n        xhr.setRequestHeader(\"X-CoinAPI-Key\",\"6CC2846F-2739-4DD5-A3CF-9361997D87CA\");\n\n        xhr.timeout = 10000;// 10 seconds for timeout\n\n        xhr.send(mapBody);\n    }\n\n   \n\n    NextReqPrice(){\n        this.RefreshUI()\n\n        cc.log(\"nIndexReq=\"+this.nIndexReq)\n        if (this.nIndexReq>= this.vCoinData.length ){\n            return\n        }\n        this.ReqPriceOne()\n        this.nIndexReq++;\n\n        let selfObj = this;\n        let OnResultLocal = function(){\n            selfObj.NextReqPrice()\n        }\n        this.scheduleOnce(OnResultLocal, 0.5)\n    }\n\n    ReqPriceOne(){\n        \n        let nId = this.vCoinData[this.nIndexReq].nId\n       \n        let mapCoinTab = ResManager.Instance.mapCoinTab\n        let strSymbol = mapCoinTab[nId].strSymbol\n        this.sendXHR(strSymbol)\n        // for(let k in mapCoinTab)\n        // {\n        //     let mapCoinTab = ResManager.Instance.mapCoinTab\n        //     let strSymbol = mapCoinTab[k].strSymbol\n        //     this.sendXHR(strSymbol)\n        // }\n\n       \n    }\n    RefreshData() {\n        this.nIndexReq = 0\n        this.vCoinData = []\n        let mapCoinTab = ResManager.Instance.mapCoinTab\n        for(let k in mapCoinTab)\n        {\n            let cellInfo = new CoinData();\n            cellInfo.nId = mapCoinTab[k].nId\n            cellInfo.nPriceHi = 100000\n            cellInfo.nMC = cellInfo.nPriceHi * mapCoinTab[k].nCount\n\n            cellInfo.nScale = cellInfo.nPriceHi/mapCoinTab[k].nPriceLow\n\n            this.vCoinData.push(cellInfo);\n        }\n        this.NextReqPrice()\n        \n    }\n    OnOpen( strParam: string)\n    {\n        this.RefreshData()\n        //this.RefreshUI()\n\n    }\n\n    \n\n    OnClose()\n    {\n        \n    }\n    getCellHeight(nIndex:number)\n    {\n        return 50;\n        \n    }\n    refreshCell( nIndex:number)\n    {\n        let cellData:any = this.tableview.dequeueCell();\n        if(cellData === null)\n        {\n            cellData = new MyCellData();\n            let node = this.tableview.createElementNode();\n            node.active = true;\n            cellData.init(node);\n            cellData.btnIcon.node.on(cc.Node.EventType.TOUCH_END, this.clickCell.bind(this,cellData.btnIcon),this);\n\n        }\n        cc.log('refreshCell'+nIndex);\n\n        let cellInfo = this.vCoinData[nIndex];\n        cellData.refreshUI(cellInfo);\n        cellData.btnIcon.nTag = nIndex;\n        \n        return cellData;\n    }\n    clickCell(btnIcon)\n    {\n        let nIndex = btnIcon.nTag;\n        cc.log('clickcell='+nIndex);\n\n        let nId = this.vCoinData[nIndex].nId;\n        if(nId === 1 )\n        {\n\n        }\n        else if(nId === 2 )\n        {\n            UIManager.Instance.OpenPanel(EUIPanelType.GAME);\n\n        }\n        \n    }\n  \n    clickBegin(nTag){\n        cc.log('clickbegin'+nTag);\n        UIManager.Instance.OpenPanel(EUIPanelType.HOME);\n    }\n\n    clickOrder(nTag){\n        cc.log('clickOrder'+nTag);\n        if(this.nOrderState == 0){\n            this.nOrderState = 1\n            this.vCoinData.sort(function (v1:CoinData, v2:CoinData):number\n            {\n                return v2.nScale - v1.nScale;\n            }); \n            \n\n        }else{\n            this.nOrderState = 0\n            this.vCoinData.sort(function (v1:CoinData, v2:CoinData):number\n            {\n                return v2.nMC - v1.nMC;\n            }); \n        }\n\n\n        this.RefreshUI()\n    }\n\n    \n}\n"]}