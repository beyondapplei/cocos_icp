{"version":3,"sources":["assets/Script/ui/BWPlayerUnit.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,mCAA8B;AAC9B,8CAA8C;AAC9C,gDAA2C;AAC3C,4CAAuC;AAEjC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA0C,gCAAM;IAAhD;QAAA,qEAyDC;QAxDG,qBAAe,GAAW,GAAG,CAAC;QAC9B,uBAAiB,GAAW,CAAC,CAAC;;IAuDlC,CAAC;IArDG,2BAAI,GAAJ;QAEI,iBAAM,IAAI,WAAE,CAAC;QACb,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,EAAE,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;QAC3B,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QAEjB,SAAS,iBAAiB,CAAC,GAAG,EAAE,WAAW;YAEvC,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAA;YAClD,MAAM,CAAC,WAAW,GAAG,WAAW,CAAA;YAEhC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM,CAAC,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC;YACzC,sCAAsC;QAC1C,CAAC;QACD,EAAE,CAAC,MAAM,CAAC,OAAO,CAAE,eAAe,EAAE,EAAE,CAAC,WAAW,EAAE,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACtF,CAAC;IACD,6BAAM,GAAN,UAAO,EAAE;QAEL,IAAG,IAAI,CAAC,KAAK,EACb;YACI,OAAO;SACV;QACD,iBAAM,MAAM,YAAC,EAAE,CAAC,CAAC;QACjB,IAAI,CAAC,iBAAiB,IAAI,EAAE,CAAC;QAC7B,IAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,eAAe,EAChD;YACI,wCAAwC;YACxC,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,mBAAM,CAAC,YAAY,CAAC,CAAC;YACrD,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;SAC9B;IACL,CAAC;IACD,6BAAM,GAAN;QAEI,iBAAM,MAAM,WAAE,CAAC;IAEnB,CAAC;IACD,iCAAU,GAAV;QAEI,IAAG,IAAI,CAAC,KAAK,EAAC;YAAC,OAAO;SAAC;QACvB,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,mBAAM,CAAC,eAAe,CAAC,CAAC;QACxD,IAAG,IAAI,CAAC,GAAG,IAAI,CAAC,EAChB;YACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAElB,IAAI,aAAa,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC;YACvD,aAAa,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;SACrC;QACD,6CAA6C;IACjD,CAAC;IAvDgB,YAAY;QADhC,OAAO;OACa,YAAY,CAyDhC;IAAD,mBAAC;CAzDD,AAyDC,CAzDyC,gBAAM,GAyD/C;kBAzDoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["\nimport BWUnit from \"./BWUnit\";\n//import BWUnitManager from \"./BWUnitManager\";\nimport EventManager from \"../EventManager\";\nimport { ECMDID } from \"../CommonEnum\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BWPlayerUnit extends BWUnit {\n    nCreateBulletCd: number = 0.1;\n    nCreateBulletCdDt: number = 0;\n\n    Init()\n    {\n        super.Init();\n        this.nHp = 3;\n        cc.log(\"BWPlayerUnit.Init\")\n        this.nSpeedY = 1;    \n        \n        function onLoadTexturebEnd(err, spriteFrame)\n        {\n            let sprite = this.rootNode.addComponent(cc.Sprite)  \n            sprite.spriteFrame = spriteFrame  \n\n            sprite.type = cc.Sprite.Type.SIMPLE;\n            sprite.sizeMode = cc.Sprite.SizeMode.RAW;\n            //this.rootNode.setContentSize(80,80);\n        }\n        cc.loader.loadRes( \"texture/plane\", cc.SpriteFrame, onLoadTexturebEnd.bind(this));\n    }\n    update(dt)\n    {\n        if(this.bDead)\n        {\n            return;\n        }\n        super.update(dt);\n        this.nCreateBulletCdDt += dt;\n        if(this.nCreateBulletCdDt > this.nCreateBulletCd)\n        {\n            //BWUnitManager.Instance.CreateBullet();\n            EventManager.Instance.FireEvent(ECMDID.CREATEBULLET);\n            this.nCreateBulletCdDt = 0;\n        }\n    }\n    OnDead()\n    {\n        super.OnDead();\n\n    }\n    BeAttacked()\n    {\n        if(this.bDead){return;}\n        this.nHp--;\n        EventManager.Instance.FireEvent(ECMDID.REFRESHPLAYERHP);\n        if(this.nHp <= 0)\n        {\n            this.bDead = true;\n            \n            let BWUnitManager = require(\"./BWUnitManager\").default;\n            BWUnitManager.Instance.GameOver();\n        }\n        //this.labelNum.string = this.nHp.toString();\n    }\n\n}\n"]}