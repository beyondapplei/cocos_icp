{"version":3,"sources":["assets/Script/ResManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":[" \nimport UIPanel from \"./ui/UIPanel\"\n\nimport {EUIPanelType} from \"./CommonEnum\";\n\nimport {UIPanelTab,SkillTab, FunctionTab,CoinTab} from \"./TableStruct\";\n\n\nexport default class ResManager {\n\n    toRead(strParam:string, strType:string):any\n    {\n\n        if( strType === 'number')\n        {\n            return parseFloat(strParam);\n        }\n        else if(strType === 'string')\n        {\n            return strParam;\n        }\n        else if(strType === 'arrayfloat')\n        {\n            let vstrTitle: string[] = strParam.split('|');\n            let vintA: number[] = [];\n            for(let nIndex=0; nIndex < vstrTitle.length; ++nIndex)\n            {\n                vintA[nIndex] = parseFloat(vstrTitle[nIndex]);\n            }\n            return vintA;\n\n        }\n        else if(strType === 'arraystring')\n        {\n            let vstrTitle: string[] = strParam[2].split('|');\n            return vstrTitle;\n        }\n        return '';\n    }\n\n    public static readonly Instance: ResManager = new ResManager();\n    private ResManager(){\n    }\n    mapUIPanelTab: {[key: number]: UIPanelTab} = {};\n    mapSkillTab: {[key: number]: SkillTab} = {};\n    mapFunctionTab: {[key: number]: FunctionTab} = {};\n    mapCoinTab: {[key: number]: CoinTab} = {};\n\n    mapNameTabData: {[key: string]: any} = \n    {\n        'uipanel': [UIPanelTab, this.mapUIPanelTab],\n        'functiontype': [FunctionTab, this.mapFunctionTab],\n        'coin': [CoinTab, this.mapCoinTab],\n\n    };\n\n    onLoadTabEnd(err, res){\n        cc.log('onLoadTabEnd='+res.name);\n\n        let strContent: string = res.text;\n        let vstrArray: string[] = strContent.split('\\r\\n');\n        let vstrTitleType: string[] = vstrArray[0].split(',')\n        let vstrTitle: string[] = vstrArray[1].split(',')\n\n        let tabAny = this.mapNameTabData[res.name][0];\n        let mapData = this.mapNameTabData[res.name][1]\n\n        for(let nIndex=2; nIndex<vstrArray.length; ++nIndex)\n        {\n            let vstrLine: Array<string> = vstrArray[nIndex].split(',')\n            let uiPanelTab = new tabAny();\n            for(let nIndexLine=0; nIndexLine<vstrTitleType.length; ++nIndexLine)\n            {\n                let strTitleName = vstrTitle[nIndexLine]\n                let strTitleType = vstrTitleType[nIndexLine]\n                uiPanelTab[strTitleName] = this.toRead(vstrLine[nIndexLine], strTitleType)\n            }\n            mapData[uiPanelTab.nId] = uiPanelTab;\n            \n        }\n        //let uiTab:UIPanelTab = this.mapUIPanelTab[2];\n        //cc.log('table='+uiTab.strName)\n    }\n\n    Init(){\n        for(let key in this.mapNameTabData)\n        {\n            cc.resources.load( key, this.onLoadTabEnd.bind(this));\n        }\n    }\n}\n"]}