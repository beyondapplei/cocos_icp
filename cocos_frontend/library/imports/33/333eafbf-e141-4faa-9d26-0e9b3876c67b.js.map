{"version":3,"sources":["assets/Script/EventManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\n\nclass TargetData\n{\n    target: Object;\n    callback: Function ;\n}\n\nclass CMDData \n{\n     nCMDId: number;\n     vTarget: Array<TargetData> = new Array<TargetData>();\n}\n\nexport default  class EventManager {\n    public static readonly Instance: EventManager = new EventManager();\n    private UIManager(){\n    }\n\n    public static FireEvent(nCMDId: number, strParam?: string){\n        EventManager.Instance.FireEvent(nCMDId, strParam);\n    }\n\n    mapEvent: {[key: number]: CMDData} = {};\n\n    Init(){\n    }\n\n    IsHaveEvent(nCMDId: number, target: Object, callback: Function): boolean\n    {\n        if (this.mapEvent[nCMDId] == null )\n        {\n            return false;\n        }\n        let mapEvent = this.mapEvent[nCMDId]\n        for(let nIndex=0; nIndex <mapEvent.vTarget.length; ++nIndex )\n        {\n            let tagetData = mapEvent.vTarget[nIndex];\n            if(tagetData.callback === callback && tagetData.target === target)\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    AddEvent(nCMDId: number, target: Object, callback: Function){\n        if(this.IsHaveEvent(nCMDId, target, callback))\n        {\n            return;\n        }\n        if (this.mapEvent[nCMDId] == null )\n        {\n            this.mapEvent[nCMDId] = new CMDData();\n        }\n\n        let makpEvent = this.mapEvent[nCMDId]\n        let targetD = new TargetData();\n        targetD.target = target;\n        targetD.callback = callback;\n        makpEvent.vTarget.push(targetD);\n    }\n    RemoveEvent(nCMDId: number, target: Object, callback: Function){\n        if(this.IsHaveEvent(nCMDId, target, callback) === false)\n        {\n            return;\n        }\n    \n        let mapEvent = this.mapEvent[nCMDId]\n        for(let nIndex=0; nIndex <mapEvent.vTarget.length; ++nIndex )\n        {\n            let tagetData = mapEvent.vTarget[nIndex];\n            if( tagetData.target === target && tagetData.callback === callback)\n            {\n                mapEvent.vTarget.splice(nIndex, 1);\n                return;\n            }\n        }\n    }\n\n    FireEvent(nCMDId: number, strParam?: string){\n        if (this.mapEvent[nCMDId] == null )\n        {\n            return;\n        }\n    \n        let mapEvent = this.mapEvent[nCMDId]\n        for(let nIndex=0; nIndex <mapEvent.vTarget.length; ++nIndex )\n        {\n            let tagetData = mapEvent.vTarget[nIndex];\n            if( tagetData.target && tagetData.callback)\n            {\n                tagetData.callback.call(tagetData.target, strParam)\n            }\n        }\n    }\n}\n"]}