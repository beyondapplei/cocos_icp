{"version":3,"sources":["assets/Script/ui/BWEnemyUnit.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport BWUnit from \"./BWUnit\";\nimport UIManager from \"../UIManager\";\n//import BWUnitManager from \"./BWUnitManager\";\nimport {ECMDID, ESceneType, EUIPanelType, EUnitType} from \"../CommonEnum\";\n\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BWEnemyUnit extends BWUnit  {\n\n    labelNum: cc.Label\n    \n    Init()\n    {\n        super.Init();\n        this.nHp = 6;\n        this.nSpeedY = -(Math.random()*15+1);\n        cc.log(\"BWEnemyUnit.Init\")\n    \n        function onLoadTexturebEnd(err, spriteFrame)\n        {\n            let sprite = this.rootNode.addComponent(cc.Sprite)  \n            sprite.spriteFrame = spriteFrame  \n            sprite.type = cc.Sprite.Type.SIMPLE;\n            sprite.sizeMode = cc.Sprite.SizeMode.RAW;\n        }\n        let nNum = Math.round(Math.random()*2)+1\n        let strEnemyName = \"enemy\" + nNum;\n        cc.log(strEnemyName)\n        cc.loader.loadRes( \"texture/\"+strEnemyName, cc.SpriteFrame, onLoadTexturebEnd.bind(this));\n        let labNode = new cc.Node()\n        this.labelNum = labNode.addComponent(cc.Label);\n        this.labelNum.node.color = cc.Color.RED;\n        labNode.parent = this.rootNode;\n\n    }\n    update(dt)\n    {\n        if(this.bDead)\n        {\n            return;\n        }\n        super.update(dt);\n\n        let gamePanel: any = UIManager.Instance.GetPanel(EUIPanelType.GAME);\n        if(gamePanel.InOutCameraBottom(this))\n        {\n            this.bDead = true;\n            let BWUnitManager = require(\"./BWUnitManager\").default;\n            BWUnitManager.Instance.AddUnitToDelete(this);\n        }\n\n    }\n    OnDead()\n    {\n        super.OnDead();\n\n    }\n    BeAttacked()\n    {\n        if(this.bDead){return;}\n        this.nHp--;\n        if(this.nHp <= 0)\n        {\n            this.Dead();\n        }\n        this.labelNum.string = this.nHp.toString();\n    }\n    Dead()\n    {\n        if(this.bDead){return;}\n        this.bDead = true;\n        this.labelNum.string = \"\";\n        let BWUnitManager = require(\"./BWUnitManager\").default;\n        BWUnitManager.Instance.AddScore();\n        BWUnitManager.Instance.AddUnitToDelete(this);\n    }\n\n\n}\n"]}